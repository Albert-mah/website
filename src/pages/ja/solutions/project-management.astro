---
import Layout from "../../../layouts/Layout.astro";
import ShapeFooter from "../../../components/ShapeFooter.astro";
import InteractiveDemo from "../../../components/InteractiveDemo.astro";
import { listPluginCategories } from "../../../utils";

// インタラクティブデモデータをインポート
import projectDemoGuides from "../../../data/project-management-demo-ja.json";

// プラグインデータを取得
const pluginData = await listPluginCategories();
const allPlugins = pluginData.flatMap((group: any) => group.plugins);

// プロジェクト管理で使用するプラグインを定義
const projectPluginNames = [
  "Data Visualization: ECharts",
  "Collection: Comment",
  "Workflow: Custom action event"
];

// 名前でプラグインを検索
function findPluginByName(name: string) {
  return allPlugins.find((plugin: any) => 
    plugin.name === name || 
    plugin.name_cn === name ||
    plugin.package_name?.includes(name.toLowerCase())
  );
}

// プロジェクト管理関連プラグインを取得
const projectPlugins = projectPluginNames.map(name => findPluginByName(name)).filter(Boolean);

// デバッグ情報
console.log('Found plugins:', projectPlugins.map(p => p?.name || p?.name_cn));
---

<Layout
  title="包括的な研発プロジェクト管理ソリューション"
  description="NocoBase 研発プロジェクト管理システムは、完全な開発ライフサイクル管理機能を提供します。要件計画、タスク割り当て、進捗追跡から品質管理まで、全プロセスのデジタル管理とチームコラボレーションを実現します。"
  keywords="NocoBase 研発プロジェクト管理, タスク管理, チームコラボレーション, アジャイル開発, 品質管理"
>
  <!-- Hero/Banner Start -->
  <section class="bg-half-170 bg-light d-table w-100">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-6 col-md-7 order-1 order-md-1">
          <div class="title-heading">
            <h1 class="fw-bold mt-2 mb-3">包括的な<br/>研発プロジェクト管理ソリューション</h1>
            <p class="para-desc text-muted">NocoBase で構築された強力で柔軟な研発プロジェクト管理プラットフォーム。アジャイル、ウォーターフォール、ハイブリッドなど、複数の開発手法をサポート。要件、タスク、チーム、イテレーション、品質を一つのプラットフォームで管理。</p>
            <div class="mt-3 p-2" style="background-color: #f8f9fa; border-left: 3px solid #2f55d4; border-radius: 4px;">
              <small class="text-muted">
                <i class="uil uil-info-circle"></i> NocoBase 1.x で構築（2.0 開発中）
              </small>
            </div>

            <!-- タグ -->
            <div class="row mt-4">
              <div class="col-auto">
                <div class="d-flex align-items-center">
                  <span class="text-muted me-2">適用業界：</span>
                  <span class="badge bg-soft-primary">研発</span>
                </div>
              </div>
            </div>

            <!-- 開発者情報 -->
            <div class="row mt-4">
              <div class="col-auto">
                <div class="d-flex align-items-center">
                  <span class="text-muted me-2">開発者：</span>
                  <a href="https://www.nocobase.com" target="_blank" class="text-primary text-decoration-none fw-medium">NocoBase</a>
                </div>
              </div>
            </div>

            <!-- ボタン -->
            <div class="mt-4 pt-2">
              <a href="https://demo-ja.nocobase.com/new" target="_blank" class="btn btn-primary me-3">
                <i class="uil uil-play me-1"></i>オンラインデモ
              </a>
              <a href="#copy-tutorial" class="btn btn-outline-primary">
                <i class="uil uil-copy me-1"></i>環境にデプロイ
              </a>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-6 col-md-5 order-2 order-md-2 mt-4 pt-2 mt-sm-0 pt-sm-0">
          <div class="text-center">
            <!-- プロジェクト管理プレビュー -->
            <div class="position-relative">
              <img 
                src="https://static-docs.nocobase.com/screenshot-20250909-151855-1.png" 
                alt="NocoBase 研発プロジェクト管理システムプレビュー" 
                class="img-fluid rounded shadow"
                style="max-height: 400px; object-fit: cover;"
              />
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->
    </div> <!--end container-->
  </section><!--end section-->
  <!-- Hero/Banner End -->

  <!-- Features Start -->
  <section class="section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="section-title text-center mb-4 pb-2">
            <h4 class="title mb-4">NocoBase プロジェクト管理の独自性</h4>
            <p class="para-desc mx-auto text-muted mb-0">プロジェクト管理方法論に適応する包括的なソリューション</p>
          </div>
        </div><!--end col-->
      </div><!--end row-->

      <div class="row">
        <div class="col-lg-3 col-md-6 mt-4 pt-2">
          <div class="card border-0 features feature-primary feature-clean course-feature p-4 overflow-hidden shadow h-100">
            <div class="icons text-start">
              <i class="uil uil-layers rounded h3 mb-0"></i>
            </div>
            <div class="card-body p-0 mt-4">                                            
              <h5 class="title text-dark">完全な研発ライフサイクル</h5>
              <p class="text-muted mt-2">要件分析、設計開発からテスト、リリース、保守まで、研発のすべての段階を管理</p>
              <i class="uil uil-layers full-img"></i>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-3 col-md-6 mt-4 pt-2">
          <div class="card border-0 features feature-primary feature-clean course-feature p-4 overflow-hidden shadow h-100">
            <div class="icons text-start">
              <i class="uil uil-chart-line rounded h3 mb-0"></i>
            </div>
            <div class="card-body p-0 mt-4">                                            
              <h5 class="title text-dark">アジャイル開発管理</h5>
              <p class="text-muted mt-2">スクラムスプリント、カンバン、バーンダウンチャートをサポートし、反復開発と継続的デリバリーを実現</p>
              <i class="uil uil-chart-line full-img"></i>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-3 col-md-6 mt-4 pt-2">
          <div class="card border-0 features feature-primary feature-clean course-feature p-4 overflow-hidden shadow h-100">
            <div class="icons text-start">
              <i class="uil uil-users-alt rounded h3 mb-0"></i>
            </div>
            <div class="card-body p-0 mt-4">                                            
              <h5 class="title text-dark">チーム＆品質管理</h5>
              <p class="text-muted mt-2">開発チームを効率的に管理し、コード品質を追跡、不具合や問題を処理して製品品質を確保</p>
              <i class="uil uil-users-alt full-img"></i>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-3 col-md-6 mt-4 pt-2">
          <div class="card border-0 features feature-primary feature-clean course-feature p-4 overflow-hidden shadow h-100">
            <div class="icons text-start">
              <i class="uil uil-cube rounded h3 mb-0"></i>
            </div>
            <div class="card-body p-0 mt-4">                                            
              <h5 class="title text-dark">NocoBase プラットフォーム</h5>
              <p class="text-muted mt-2">NocoBaseのノーコード機能により、組織固有のニーズに合わせて迅速にカスタマイズ可能</p>
              <i class="uil uil-cube full-img"></i>
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- Features End -->


  <!-- Try Project Management Extension Start -->
  <section class="section bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 text-center">

        <div class="mt-4" id="ticket-demo-wrap">
          <!-- インタラクティブデモ -->
          <InteractiveDemo guides={projectDemoGuides}  />
        </div><!--end ticket-demo-wrap-->

        <div class="row justify-content-center mt-4">
          <div class="col-12 text-center">
            <div class="mt-4 pt-2">
              <a href="https://demo-ja.nocobase.com/new" target="_blank" class="btn btn-primary me-3">
                <i class="uil uil-play me-1"></i>今すぐ体験
              </a>
              <a href="#copy-tutorial" class="btn btn-outline-primary">
                <i class="uil uil-copy me-1"></i>環境にコピー
              </a>
            </div>
          </div><!--end col-->
        </div><!--end row-->
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- Try Project Management Extension End -->

  <!-- Development Tutorial Start -->
  <section class="section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="section-title text-center mb-4 pb-2">
            <h4 class="title mb-4">プロジェクト管理開発チュートリアル</h4>
            <p class="para-desc mx-auto text-muted mb-0">NocoBase を使用してゼロからプロフェッショナルなプロジェクト管理システムを構築する方法を学ぶ</p>
          </div>
        </div><!--end col-->
      </div><!--end row-->

      <div class="row">
        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 shadow rounded h-100">
            <div class="card-body p-4 d-flex flex-column">
              <div class="icon text-primary text-center">
                <i class="uil uil-database h2 mb-3"></i>
              </div>
              <div class="flex-grow-1">
                <h5 class="mb-3 text-center">データモデル設計</h5>
                <p class="text-muted text-center">プロジェクト、タスク、チームの基本データ構造とその関係を作成する方法を学ぶ</p>
              </div>
              <div class="text-center">
                <button class="btn btn-outline-secondary btn-sm">近日公開</button>
              </div>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 shadow rounded h-100">
            <div class="card-body p-4 d-flex flex-column">
              <div class="icon text-primary text-center">
                <i class="uil uil-sitemap h2 mb-3"></i>
              </div>
              <div class="flex-grow-1">
                <h5 class="mb-3 text-center">ワークフロー設定</h5>
                <p class="text-muted text-center">タスク割り当て、ステータス遷移、自動化プロジェクトワークフローを設定</p>
              </div>
              <div class="text-center">
                <button class="btn btn-outline-secondary btn-sm">近日公開</button>
              </div>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 shadow rounded h-100">
            <div class="card-body p-4 d-flex flex-column">
              <div class="icon text-primary text-center">
                <i class="uil uil-chart-line h2 mb-3"></i>
              </div>
              <div class="flex-grow-1">
                <h5 class="mb-3 text-center">スプリントと追跡</h5>
                <p class="text-muted text-center">スプリント、バーンダウンチャート、進捗追跡機能を設定</p>
              </div>
              <div class="text-center">
                <button class="btn btn-outline-secondary btn-sm">近日公開</button>
              </div>
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- Development Tutorial End -->

  <!-- Commercial Plugins Start -->
  <section class="section bg-light">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="section-title text-center mb-4 pb-2">
            <h4 class="title mb-4">商用プラグインで機能を強化</h4>
            <p class="para-desc mx-auto text-muted mb-0">強力な商用プラグインでプロジェクト管理機能を拡張</p>
          </div>
        </div><!--end col-->
      </div><!--end row-->

      <div class="row pb-4">
        <!-- 動的に生成されるプラグインカード -->
        {projectPlugins.slice(0, 6).map((plugin) => {
          if (!plugin) return null;
          
          const displayName = plugin.name_jp || plugin.name;
          const displayDescription = plugin.description_jp || plugin.description;
          const docsUrl = plugin.docs_jp || plugin.docs;
          
          return (
            <div class="col-lg-4 col-md-6 col-12 pt-0 pb-4">
              <div title={displayName} style="color: inherit;" class="card rounded shadow border-0 plugin-card h-100">
                <div class="card-body">
                  <div class="mt-2 plugin-box">
                    <h6 class="card-title mb-1">{displayName}</h6>
                    <div class="plugin-developer text-muted mb-3">提供者: <span>{plugin.developer || 'NocoBase'}</span></div>
                    <p class="text-muted mb-2 plugin-overview">{displayDescription}
                      {docsUrl && (
                        <a href={docsUrl} target="_blank" style="font-size: 14px;margin-left: 5px;">詳細</a>
                      )}
                    </p>
                    {plugin.commercial && (
                      <div class="plugin-footer">
                        <h6 class="text-primary mb-0">
                          <span class="text-muted" style="font-weight: normal;font-style: italic;font-size: 12px;">生涯使用、1年アップグレード</span><br>
                          <a href="/ja/plugins-bundles"> {plugin.points_1_year || 0} <i class="uil uil-moon-eclipse me-1"></i></a>
                          <span class="text-muted">/</span>
                          <span class="text-muted">¥{plugin.price_1_year_jp || 0}</span>
                        </h6>
                        <h6 class="text-muted mb-0" style="margin-left: auto;font-weight: normal;">
                          <span class="text-muted" style="font-weight: normal;font-style: italic;font-size: 12px;">生涯使用とアップグレード</span><br>
                          <a class="text-muted" href="/ja/plugins-bundles"> {plugin.point || 0} <i class="uil uil-moon-eclipse me-1"></i></a>
                          <span class="text-muted">/</span>
                          <span class="text-muted">¥{plugin.price_jp || 0}</span>
                        </h6>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>
          );
        })}
      </div><!--end row-->

      <div class="row justify-content-center mt-4">
        <div class="col-12 text-center">
          <a href="/ja/plugins-commercial" class="btn btn-primary me-3">すべての商用プラグインを見る</a>
          <a href="/ja/commercial" class="btn btn-outline-primary">価格を確認</a>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- Commercial Plugins End -->

  <!-- How to Use Start -->
  <section class="section" id="copy-tutorial">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12">
          <div class="section-title text-center mb-4 pb-2">
            <h4 class="title mb-4">どのように使用しますか？</h4>
            <p class="para-desc mx-auto text-muted mb-0">3つのステップでプロジェクト管理機能を持つ NocoBase CRM システムを環境にデプロイ</p>
          </div>
        </div><!--end col-->
      </div><!--end row-->

      <div class="row">
        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 text-center features feature-clean course-feature p-4 shadow h-100">
            <div class="d-flex flex-column h-100">
              <div class="icons text-center">
                <i class="uil uil-download-alt h1 text-primary"></i>
              </div>
              <div class="content mt-4 flex-grow-1">
                <h5>NocoBase システムをインストール</h5>
                <p class="text-muted mt-2">インストールドキュメントに従って NocoBase システムをサーバーにデプロイ</p>
              </div>
              <div class="mt-3">
                <a href="https://docs-ja.nocobase.com/welcome/getting-started/installation" target="_blank" class="btn btn-primary">インストールガイドを見る</a>
              </div>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 text-center features feature-clean course-feature p-4 shadow h-100">
            <div class="d-flex flex-column h-100">
              <div class="icons text-center">
                <i class="uil uil-cloud-download h1 text-primary"></i>
              </div>
              <div class="content mt-4 flex-grow-1">
                <h5>CRM システムテンプレートをダウンロード</h5>
                <p class="text-muted mt-2">プロジェクト管理機能を取得するための完全な CRM テンプレートをダウンロード</p>
              </div>
              <div class="mt-3">
                <div>
                  <a href="https://static-docs.nocobase.com/pm_demo/demo_en_250910.zip" class="text-muted small" style="text-decoration: underline !important;">SQL ファイルをダウンロード</a>
                </div>
                <a href="https://static-docs.nocobase.com/pm_demo/demo_en_20250910.nbdata" class="btn btn-outline-primary">バックアップファイル (.nbdata) をダウンロード</a>
              </div>
            </div>
          </div>
        </div><!--end col-->

        <div class="col-lg-4 col-md-6 mt-4 pt-2">
          <div class="card border-0 text-center features feature-clean course-feature p-4 shadow h-100">
            <div class="d-flex flex-column h-100">
              <div class="icons text-center">
                <i class="uil uil-upload h1 text-primary"></i>
              </div>
              <div class="content mt-4 flex-grow-1">
                <h5>システムで復元</h5>
                <p class="text-muted mt-2">CRM テンプレートファイルを NocoBase システムにインポートして、CRM とプロジェクト管理機能を取得</p>
              </div>
              <div class="mt-3">
                <a href="/ja/tutorials/nocobase-crm-demo-deployment-guide" class="btn btn-outline-primary">復元チュートリアル</a>
              </div>
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->

      <!-- プロジェクト管理機能の説明 -->
      <div class="row justify-content-center mt-5">
        <div class="col-lg-8">
          <div class="alert border-0 shadow-sm" style="background: #f8f9fa; border-left: 4px solid #007bff !important;">
            <div class="d-flex align-items-start">
              <div class="flex-shrink-0 me-3">
                <i class="uil uil-info-circle h4 text-primary mb-0"></i>
              </div>
              <div class="flex-grow-1">
                <h6 class="mb-2 text-dark fw-medium">ヒント</h6>
                <p class="mb-0 text-muted">プロジェクト管理システムは包括的なモジュールとして CRM テンプレートに完全に統合されています。デプロイ後、CRM システム内で完全なプロジェクト管理機能を直接使用でき、プロジェクトとチームの全プロセス管理を実現できます。</p>
              </div>
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- How to Use End -->

  <!-- CTA Start -->
  <section class="section bg-primary">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
          <div class="text-center">
            <h3 class="title mb-4 text-white">研発管理の変革準備はできていますか？</h3>
            <p class="para-desc mx-auto text-white-50 mb-0">
              NocoBase 研発プロジェクト管理システムで、チームコラボレーションを強化し、製品デリバリー品質を向上させましょう。今すぐ体験して、開発チームの効率を最大化してください。
            </p>
            <div class="mt-4 pt-2">
              <a href="https://demo-ja.nocobase.com/new" target="_blank" class="btn btn-light me-3">
                <i class="uil uil-play me-1"></i>今すぐ体験
              </a>
              <a href="#copy-tutorial" class="btn btn-outline-light">
                <i class="uil uil-copy me-1"></i>環境にデプロイ
              </a>
            </div>
          </div>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </section><!--end section-->
  <!-- CTA End -->

  <ShapeFooter />
</Layout>

<style>
/* プロジェクト管理システムスタイル - チケットページスタイルを参照 */
#ticket-demo-wrap {
  position: relative;
}

/* プラグインカードスタイル */
.plugin-card {
  transition: all 0.3s ease;
}

.plugin-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

.plugin-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: auto;
}

.plugin-footer .badge {
  font-size: 0.7rem;
  padding: 0.2rem 0.4rem;
}

.plugin-developer span {
  color: #6c757d;
}

.plugin-overview {
  font-size: 0.9rem;
  line-height: 1.5;
}

.plugin-footer h6 {
  font-size: 0.8rem;
}

.plugin-box {
  display: flex;
  flex-direction: column;
  height: 100%;
}
</style>